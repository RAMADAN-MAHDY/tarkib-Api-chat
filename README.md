
# Tarkib Smart Chat API

## 🛋️ نبذة عن المشروع
مشروع دردشة ذكية مخصص لمؤسسة **تراكيب للأثاث والديكورات**، يهدف إلى تحسين تجربة العملاء من خلال الردود التفاعلية، إدارة الطلبات، وتسهيل عمليات الحجز باستخدام تقنيات حديثة مثل **Node.js** و**MongoDB**، بالإضافة إلى دمج الذكاء الاصطناعي عبر **OpenAI API**.

---

## ✨ المميزات الرئيسية
- 🔐 حماية متقدمة باستخدام **JWT** لتأمين الجلسات.
- 🧠 دردشة ذكية باللهجة السعودية لفهم احتياجات العملاء.
- 📅 إدارة الطلبات والحجوزات تلقائيًا.
- 📊 تحليل سلوك المستخدم لتحسين تجربة التصفح.
- 🛡️ تأمين ضد الهجمات الشائعة مثل **XSS** و**NoSQL Injection** باستخدام أدوات مثل `helmet` و`xss-clean`.

---

## 🤖 دور الذكاء الاصطناعي
- فهم رسائل العملاء وتحديد نوع الخدمة المطلوبة (تفصيل، تصميم، تركيب).
- استخراج بيانات الحجز مثل التاريخ، الموقع، رقم الجوال.
- تقديم ردود تفاعلية ودقيقة باللهجة المحلية.
- تقليل الحاجة للتدخل البشري في عمليات الحجز الأولية.

---

## 🛠️ التقنيات المستخدمة
- **Node.js** + **Express.js**
- **MongoDB** / **MongoDB Atlas**
- **OpenAI API**
- **JWT Authentication**
- **Helmet, XSS-Clean, Rate-Limit**
- **dotenv** لإدارة المتغيرات البيئية

---

## 🚀 خطوات التشغيل

### المتطلبات
- Node.js مثبت على الجهاز
- قاعدة بيانات MongoDB
- مفتاح API من OpenAI

### الإعداد
1. **نسخ المشروع:**
   ```bash
   git clone <REPO_URL>
   cd tarkib-chat-api
   ```

2. **إعداد ملف البيئة `.env`:**
   ```env
   OPENAI_API_KEY="مفتاح_الذكاء_الاصطناعي"
   MONGODB_URI="رابط_قاعدة_البيانات"
   JWT_SECRET="رمز_سري_للجلسات"
   ```

3. **تثبيت الحزم:**
   ```bash
   npm install
   ```

4. **تشغيل الخادم:**
   ```bash
   node index.js
   ```
   أو:
   ```bash
   nodemon index.js
   ```

---

## 📡 نقاط النهاية (Endpoints)
| المسار | الوظيفة |
|--------|---------|
| `/chat` | دردشة ذكية مع العميل |
| `/analyze` | تحليل محتوى الرسائل |
| `/users` | إدارة بيانات المستخدمين |

---

## 🧪 مثال لرد API
```json
{
  "reply": "هلا وسهلا! 😊 وش نوع الأثاث اللي تبغاه؟",
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
}
```

---

## 📁 هيكلية الملفات
- `index.js`: نقطة تشغيل الخادم
- `db.js`: الاتصال بقاعدة البيانات
- `routes/`: مسارات الـ API
- `controllers/`: منطق التعامل مع الطلبات
- `models/`: نماذج البيانات
- `middleware/authMiddleware.js`: حماية الجلسات
- `utils/jwt.js`: توليد والتحقق من الرموز

---

## ⚠️ ملاحظات هامة
- تأكد من صحة مفاتيح البيئة قبل التشغيل.
- استخدم أدوات مثل **Postman** لاختبار الـ API.
- يفضل تشغيل الخادم باستخدام `nodemon` أثناء التطوير.

---

## 🏢 مؤسسة تراكيب
مؤسسة متخصصة في تصميم وتنفيذ الأثاث والديكورات حسب الطلب، وتسعى لتقديم تجربة رقمية سلسة لعملائها عبر حلول ذكية ومبتكرة.

---


